{"version":3,"file":"errorbar.js","sourceRoot":"","sources":["../../../src/compositemark/errorbar.ts"],"names":[],"mappings":";AAKA,MAAM,CAAC,IAAM,QAAQ,GAAgB,WAAW,CAAC;AAGjD,MAAM,4BAA4B,IAAgD;IAChF,sBAAsB;IACf,IAAA,cAAQ,EAAE,qBAAe,EAAE,oBAAc,EAAE,wBAAQ,EAAE,iFAAY,CAAS;IAC1E,IAAA,kBAAQ,EAAE,wDAAsB,CAAa;IAC7C,IAAA,iBAAO,EAAE,iBAAO,EAAE,4DAAsB,CAAa;IACrD,IAAA,0BAAK,EAAE,0BAAK,EAAE,0EAA2B,CAAwB;IAExE,IAAI,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;QAChC,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;KAC9C;IAED,4BACK,SAAS,IACZ,KAAK,EAAE;YACL;gBACE,IAAI,EAAE,MAAM;gBACZ,QAAQ,EAAE,mBAAmB;aAC9B,EAAC;gBACA,IAAI,EAAE,MAAM;gBACZ,QAAQ,EAAE,mBAAmB;aAC9B,EAAE;gBACD,IAAI,EAAE,MAAM;gBACZ,QAAQ,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC,oBACrB,CAAC,EAAE,QAAQ,CAAC,EAAE,EACd,CAAC,EAAE,QAAQ,CAAC,CAAC,IACV,wBAAwB,EAC3B,CAAC,oBACD,CAAC,EAAE,QAAQ,CAAC,CAAC,EACb,CAAC,EAAE,QAAQ,CAAC,EAAE,IACX,wBAAwB,CAC5B;aACF;SACF,IACD;AACJ,CAAC","sourcesContent":["import {Field} from '../fielddef';\nimport {Encoding} from './../encoding';\nimport {GenericUnitSpec, NormalizedLayerSpec} from './../spec';\n\n\nexport const ERRORBAR: 'error-bar' = 'error-bar';\nexport type ERRORBAR = typeof ERRORBAR;\n\nexport function normalizeErrorBar(spec: GenericUnitSpec<Encoding<Field>, ERRORBAR>): NormalizedLayerSpec {\n  // TODO: use selection\n  const {mark: _m, selection: _sel, projection: _p, encoding, ...outerSpec} = spec;\n  const {size: _s, ...encodingWithoutSize} = encoding;\n  const {x2: _x2, y2: _y2, ...encodingWithoutX2Y2} = encoding;\n  const {x: _x, y: _y, ...encodingWithoutX_X2_Y_Y2} = encodingWithoutX2Y2;\n\n  if (!encoding.x2 && !encoding.y2) {\n    throw new Error('Neither x2 or y2 provided');\n  }\n\n  return {\n    ...outerSpec,\n    layer: [\n      {\n        mark: 'rule',\n        encoding: encodingWithoutSize\n      },{ // Lower tick\n        mark: 'tick',\n        encoding: encodingWithoutX2Y2\n      }, { // Upper tick\n        mark: 'tick',\n        encoding: encoding.x2 ? {\n          x: encoding.x2,\n          y: encoding.y,\n          ...encodingWithoutX_X2_Y_Y2\n        } : {\n          x: encoding.x,\n          y: encoding.y2,\n          ...encodingWithoutX_X2_Y_Y2\n        }\n      }\n    ]\n  };\n}\n"]}