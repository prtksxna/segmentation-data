{"version":3,"file":"toggle.js","sourceRoot":"","sources":["../../../../../src/compile/selection/transforms/toggle.ts"],"names":[],"mappings":";;AAAA,0CAA6C;AAG7C,IAAM,MAAM,GAAG,SAAS,CAAC;AAEzB,IAAM,MAAM,GAAsB;IAChC,GAAG,EAAE,UAAA,OAAO;QACV,OAAO,OAAO,CAAC,IAAI,KAAK,OAAO,IAAI,OAAO,CAAC,MAAM,CAAC;IACpD,CAAC;IAED,OAAO,EAAE,UAAC,KAAK,EAAE,OAAO,EAAE,OAAO;QAC/B,OAAO,OAAO,CAAC,MAAM,CAAC;YACpB,IAAI,EAAE,OAAO,CAAC,IAAI,GAAG,MAAM;YAC3B,KAAK,EAAE,KAAK;YACZ,EAAE,EAAE,CAAC,EAAC,MAAM,EAAE,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,EAAC,CAAC;SACvD,CAAC,CAAC;IACL,CAAC;IAED,UAAU,EAAE,UAAC,KAAK,EAAE,OAAO,EAAE,IAAI;QAC/B,IAAM,GAAG,GAAG,OAAO,CAAC,IAAI,GAAG,iBAAK,CAAC;QACjC,IAAM,MAAM,GAAG,OAAO,CAAC,IAAI,GAAG,MAAM,CAAC;QAErC,OAAO,CACF,MAAM,kBAAa,GAAG,OAAI;YAC7B,CAAC,OAAO,CAAC,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAI,MAAM,qBAAkB,CAAC,CAAC,CAAI,MAAM,yBAAoB,oBAAQ,CAAC,KAAK,CAAC,QAAK,CAAC;aAC7G,MAAM,WAAM,GAAG,YAAS,CAAA,CAC5B,CAAC;IACJ,CAAC;CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["import {TUPLE, unitName} from '../selection';\nimport {TransformCompiler} from './transforms';\n\nconst TOGGLE = '_toggle';\n\nconst toggle: TransformCompiler = {\n  has: selCmpt => {\n    return selCmpt.type === 'multi' && selCmpt.toggle;\n  },\n\n  signals: (model, selCmpt, signals) => {\n    return signals.concat({\n      name: selCmpt.name + TOGGLE,\n      value: false,\n      on: [{events: selCmpt.events, update: selCmpt.toggle}]\n    });\n  },\n\n  modifyExpr: (model, selCmpt, expr) => {\n    const tpl = selCmpt.name + TUPLE;\n    const signal = selCmpt.name + TOGGLE;\n\n    return (\n      `${signal} ? null : ${tpl}, ` +\n      (selCmpt.resolve === 'global' ? `${signal} ? null : true, ` : `${signal} ? null : {unit: ${unitName(model)}}, `) +\n      `${signal} ? ${tpl} : null`\n    );\n  }\n};\n\nexport default toggle;\n"]}